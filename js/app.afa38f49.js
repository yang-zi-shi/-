(function(t){function e(e){for(var a,n,c=e[0],i=e[1],l=e[2],u=0,h=[];u<c.length;u++)n=c[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&h.push(o[n][0]),o[n]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,n=1;n<r.length;n++){var i=r[n];0!==o[i]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var a={},o={app:0},s=[];function n(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"4115e0e3"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r=o[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=o[t]=[e,a]}));e.push(r[2]=a);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=n(t);var l=new Error;s=function(e){i.onerror=i.onload=null,clearTimeout(u);var r=o[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,r[1](l)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(r,a,function(e){return t[e]}.bind(null,a));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0cc9":function(t,e,r){"use strict";r("22f9")},"22f9":function(t,e,r){},"418d":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);var a=r("7a23");const o={id:"app"};function s(t,e,r,s,n,c){const i=Object(a["B"])("asideMenu"),l=Object(a["B"])("maskMap"),u=Object(a["B"])("lightBox");return Object(a["u"])(),Object(a["g"])("div",o,[Object(a["k"])(i,{onTriggerMarkerPopup:c.openPopup,ref:"menu"},null,8,["onTriggerMarkerPopup"]),Object(a["k"])(l,{ref:"map"},null,512),Object(a["k"])(u)])}const n={class:"aside-menu"},c={class:"wraps"},i={class:"wraps"},l=Object(a["h"])("i",{class:"fas fa-search-location"},null,-1),u={class:"store-lists"},d=["onClick"],h=["innerHTML"],b={class:"mask-info"},p=Object(a["h"])("i",{class:"fas fa-head-side-mask"},null,-1),f={class:"mask-info"},j=Object(a["h"])("i",{class:"fas fa-baby"},null,-1),m={class:"mask-info"},O=["onClick"],v=Object(a["h"])("i",{class:"fas fa-info-circle"},null,-1);function g(t,e,r,o,s,g){return Object(a["u"])(),Object(a["g"])("div",n,[Object(a["h"])("div",c,[Object(a["h"])("label",null,[Object(a["j"])(" 縣市： "),Object(a["K"])(Object(a["h"])("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.currCity=t)},[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(t.cityList,t=>(Object(a["u"])(),Object(a["g"])("option",{key:t},Object(a["D"])(t),1))),128))],512),[[a["F"],g.currCity]])]),Object(a["h"])("label",null,[Object(a["j"])(" 行政區： "),Object(a["K"])(Object(a["h"])("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.currDistrict=t)},[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(t.districtList,t=>(Object(a["u"])(),Object(a["g"])("option",{key:t.id},Object(a["D"])(t.name),1))),128))],512),[[a["F"],g.currDistrict]])])]),Object(a["h"])("div",i,[Object(a["h"])("label",null,[l,Object(a["j"])(" 關鍵字搜尋： "),Object(a["K"])(Object(a["h"])("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>g.keywords=t),type:"text",placeholder:"請輸入關鍵字"},null,512),[[a["G"],g.keywords]])])]),Object(a["h"])("ul",u,[(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(t.filteredStores,e=>(Object(a["u"])(),Object(a["g"])("li",{class:"store-info wraps",key:e.id,onClick:r=>t.$emit("triggerMarkerPopup",e.id)},[Object(a["h"])("h1",{innerHTML:g.keywordHighlight(e.name)},null,8,h),Object(a["h"])("div",b,[p,Object(a["h"])("span",null,"大人口罩: "+Object(a["D"])(e.mask_adult)+" 個",1)]),Object(a["h"])("div",f,[j,Object(a["h"])("span",null,"兒童口罩: "+Object(a["D"])(e.mask_child)+" 個",1)]),Object(a["h"])("div",m," 最後更新時間: "+Object(a["D"])(e.updated),1),Object(a["h"])("button",{class:"btn-store-detail",onClick:t=>g.openInfo(e.id)},[v,Object(a["j"])(" 看詳細資訊 ")],8,O)],8,d))),128))])])}var k=r("5502"),y={name:"asideMenu",computed:{currCity:{get(){return this.$store.state.currCity},set(t){this.$store.commit("setcurrCity",t)}},currDistrict:{get(){return this.$store.state.currDistrict},set(t){this.$store.commit("setcurrDistrict",t)}},keywords:{get(){return this.$store.state.keywords},set(t){this.$store.commit("setKeywords",t)}},showModel:{get(){return this.$store.state.showModel},set(t){this.$store.commit("setshowModal",t)}},infoBoxSid:{get(){return this.$store.state.infoBoxSid},set(t){this.$store.commit("setinfoBoxSid",t)}},...Object(k["c"])(["cityList","districtList","filteredStores"]),...Object(k["e"])(["stores"])},methods:{keywordHighlight(t){return t.replace(new RegExp(this.keywords,"g"),`<span class="heighLight">${this.keywords}</span>`)},openInfo(t){this.showModel=!0,this.infoBoxSid=t}},watch:{districtList(t){const[e]=t;this.currDistrict=e.name}},updated(){}},w=(r("e438"),r("6b0d")),S=r.n(w);const M=S()(y,[["render",g]]);var x=M;const D=t=>(Object(a["x"])("data-v-5cf623b8"),t=t(),Object(a["v"])(),t),_={class:"modal-mask"},P={class:"modal-container"},L={key:0,class:"modal-body"},C={class:"store-name"},$=D(()=>Object(a["h"])("hr",null,null,-1)),B=D(()=>Object(a["h"])("h2",{class:"title"},"營業時間",-1)),T=D(()=>Object(a["h"])("thead",null,[Object(a["h"])("tr",null,[Object(a["h"])("th"),Object(a["h"])("th",null,"一"),Object(a["h"])("th",null,"二"),Object(a["h"])("th",null,"三"),Object(a["h"])("th",null,"四"),Object(a["h"])("th",null,"五"),Object(a["h"])("th",null,"六"),Object(a["h"])("th",null,"日")])],-1)),I=D(()=>Object(a["h"])("th",null,"早上",-1)),A=D(()=>Object(a["h"])("th",null,"中午",-1)),H=D(()=>Object(a["h"])("th",null,"晚上",-1)),q={class:"title"},U={class:"title"},E={key:0,class:"title"};function K(t,e,r,o,s,n){return Object(a["u"])(),Object(a["e"])(a["b"],{name:"modal"},{default:Object(a["J"])(()=>[Object(a["K"])(Object(a["h"])("div",_,[Object(a["h"])("div",{class:"modal-wrapper",onClick:e[0]||(e[0]=Object(a["L"])((...t)=>n.close&&n.close(...t),["self"]))},[Object(a["h"])("div",P,[n.currStore?(Object(a["u"])(),Object(a["g"])("div",L,[Object(a["h"])("h1",C,Object(a["D"])(n.currStore.name),1),$,B,Object(a["h"])("table",null,[T,Object(a["h"])("tbody",null,[Object(a["h"])("tr",null,[I,(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(n.servicePeriods[0],(t,e)=>(Object(a["u"])(),Object(a["g"])("td",{key:e},Object(a["D"])(t),1))),128))]),Object(a["h"])("tr",null,[A,(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(n.servicePeriods[1],(t,e)=>(Object(a["u"])(),Object(a["g"])("td",{key:e},Object(a["D"])(t),1))),128))]),Object(a["h"])("tr",null,[H,(Object(a["u"])(!0),Object(a["g"])(a["a"],null,Object(a["A"])(n.servicePeriods[2],(t,e)=>(Object(a["u"])(),Object(a["g"])("td",{key:e},Object(a["D"])(t),1))),128))])])]),Object(a["h"])("h2",q,"地址: "+Object(a["D"])(n.currStore.address),1),Object(a["h"])("h2",U,"電話: "+Object(a["D"])(n.currStore.phone),1),n.currStore.custom_note?(Object(a["u"])(),Object(a["g"])("h2",E,"備註: "+Object(a["D"])(n.currStore.custom_note),1)):Object(a["f"])("",!0)])):Object(a["f"])("",!0)])])],512),[[a["H"],n.showModel]])]),_:1})}var z={name:"Lightbox",computed:{showModel:{get(){return this.$store.state.showModal},set(t){this.$store.commit("setshowModal",t)}},infoBoxSid:{get(){return this.$store.state.infoBoxSid},set(t){this.$store.commit("setinfoBoxSid",t)}},currStore(){return this.$store.state.stores.filter(t=>t.id===this.infoBoxSid)[0]},servicePeriods(){let t=this.currStore;return t=void 0!==t?t["service_periods"]:"",t=t.replace(/N/g,"0").replace(/Y/g,"X"),t?[t.slice(0,7).split(""),t.slice(7,14).split(""),t.slice(14,21).split("")]:t}},methods:{close(){this.showModel=!1}}};r("8f45"),r("663e"),r("0cc9");const F=S()(z,[["render",K],["__scopeId","data-v-5cf623b8"]]);var V=F;const J={id:"mask-map",class:"mask-map"};function G(t,e,r,o,s,n){return Object(a["u"])(),Object(a["g"])("div",J)}var N=r("e11e"),Q=r.n(N),W={name:"maskMap",data(){return{map:{},markers:[]}},computed:{currDistrictInfo(){return this.$store.getters.currDistrictInfo},filteredStores(){return this.$store.getters.filteredStores}},methods:{addMarker(t){const e=Q.a.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),r=Q.a.marker([t.longitude,t.latitude],{icon:e}).addTo(this.map).bindPopup(`<h2 class="popup-name">${t.name}</h2>`);r.markerId=t.id,r.lng=t.longitude,r.lat=t.latitude,this.markers.push(r)},clearMarkers(){this.map.eachLayer(t=>{t instanceof Q.a.Marker&&this.map.removeLayer(t)}),this.markers.length=0},triggerPopUp(t){const e=this.markers.find(e=>e.markerId===t);this.map.flyTo(new Q.a.LatLng(e.lng,e.lat),15),e.openPopup()}},watch:{currDistrictInfo(t){this.map.panTo(new Q.a.LatLng(t.latitude,t.longitude))},filteredStores(t){this.clearMarkers(),t.forEach(t=>this.addMarker(t))}},mounted(){this.map=Q.a.map("mask-map",{center:[25.03,121.55],zoom:14}),Q.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'<a target="_blank" href="https://www.openstreetmap.org/">© OpenStreetMap 貢獻者</a>',maxZoom:18}).addTo(this.map)}};const R=S()(W,[["render",G]]);var X=R,Y={name:"App",components:{asideMenu:x,lightBox:V,maskMap:X},methods:{...Object(k["b"])(["fetchLocations","fetchPharmacies"]),openPopup(t){this.$refs.map.triggerPopUp(t)}},mounted(){this.fetchLocations(),this.fetchPharmacies()}};r("cf16");const Z=S()(Y,[["render",s]]);var tt=Z,et=r("6605");const rt={class:"home"},at=Object(a["h"])("span",null,"quantity: ",-1);function ot(t,e,r,o,s,n){return Object(a["u"])(),Object(a["g"])("div",rt,[Object(a["h"])("h1",null,"test:"+Object(a["D"])(t.sellPrice)+","+Object(a["D"])(s.qty),1),Object(a["h"])("div",null,[at,Object(a["K"])(Object(a["h"])("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>s.qty=t)},null,512),[[a["G"],s.qty]])]),Object(a["h"])("button",{onClick:e[1]||(e[1]=e=>t.setQty(s.qty))},"Click to update!!")])}const st={class:"hello"},nt=Object(a["i"])('<p data-v-df2aa6b2> For a guide and recipes on how to configure / customize this project,<br data-v-df2aa6b2> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>vue-cli documentation</a>. </p><h3 data-v-df2aa6b2>Installed CLI Plugins</h3><ul data-v-df2aa6b2><li data-v-df2aa6b2><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router" target="_blank" rel="noopener" data-v-df2aa6b2>router</a></li><li data-v-df2aa6b2><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex" target="_blank" rel="noopener" data-v-df2aa6b2>vuex</a></li></ul><h3 data-v-df2aa6b2>Essential Links</h3><ul data-v-df2aa6b2><li data-v-df2aa6b2><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>Core Docs</a></li><li data-v-df2aa6b2><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>Forum</a></li><li data-v-df2aa6b2><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>Community Chat</a></li><li data-v-df2aa6b2><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-df2aa6b2>Twitter</a></li><li data-v-df2aa6b2><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>News</a></li></ul><h3 data-v-df2aa6b2>Ecosystem</h3><ul data-v-df2aa6b2><li data-v-df2aa6b2><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>vue-router</a></li><li data-v-df2aa6b2><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>vuex</a></li><li data-v-df2aa6b2><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-df2aa6b2>vue-devtools</a></li><li data-v-df2aa6b2><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-df2aa6b2>vue-loader</a></li><li data-v-df2aa6b2><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-df2aa6b2>awesome-vue</a></li></ul>',7);function ct(t,e,r,o,s,n){return Object(a["u"])(),Object(a["g"])("div",st,[Object(a["h"])("h1",null,Object(a["D"])(r.msg),1),nt])}var it={name:"HelloWorld",props:{msg:String}};r("95a2");const lt=S()(it,[["render",ct],["__scopeId","data-v-df2aa6b2"]]);var ut=lt,dt={name:"Home",data(){return{qty:100}},methods:{},computed:{...Object(k["e"])(["product","price","quantity"]),...Object(k["c"])(["sellPrice"]),...Object(k["d"])(["setQty"])},components:{HelloWorld:ut}};const ht=S()(dt,[["render",ot]]);var bt=ht;const pt=[{path:"/",name:"Home",component:bt},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],ft=Object(et["a"])({history:Object(et["b"])(""),routes:pt});var jt=ft,mt=Object(k["a"])({state:{currCity:"臺北市",currDistrict:"北投區",location:[],stores:[],keywords:"",showModal:!1,infoBoxSid:null},getters:{cityList(t){return t.location.map(t=>t.name)},districtList(t){let e=t.location.find(e=>e.name===t.currCity);return void 0===e?[]:e.districts},filteredStores(t){const{stores:e}=t;return t.keywords?e.filter(e=>e.name.includes(t.keywords)):e.filter(e=>e.county===t.currCity&&e.town===t.currDistrict)},currDistrictInfo(t,e){return e.districtList.find(e=>e.name===t.currDistrict)||{}}},mutations:{setcurrCity(t,e){t.currCity=e},setcurrDistrict(t,e){t.currDistrict=e},setlocation(t,e){t.location=e},setStores(t,e){t.stores=e},setKeywords(t,e){t.keywords=e},setshowModal(t,e){t.showModal=e},setinfoBoxSid(t,e){t.infoBoxSid=e}},actions:{async fetchLocations({commit:t}){const e=await fetch("https://raw.githubusercontent.com/kurotanshi/mask-map/master/raw/area-location.json").then(t=>t.json());t("setlocation",e)},async fetchPharmacies({commit:t}){const e=await fetch("https://kiang.github.io/pharmacies/json/points.json").then(t=>t.json()),r=e.features.map(t=>({...t.properties,latitude:t.geometry.coordinates[0],longitude:t.geometry.coordinates[1]}));t("setStores",r)}},modules:{}});Object(a["d"])(tt).use(mt).use(jt).mount("#app")},"654b":function(t,e,r){},"663e":function(t,e,r){"use strict";r("af0e")},"68f3":function(t,e,r){},"8f45":function(t,e,r){"use strict";r("ef29")},"95a2":function(t,e,r){"use strict";r("654b")},af0e:function(t,e,r){},cf16:function(t,e,r){"use strict";r("418d")},e438:function(t,e,r){"use strict";r("68f3")},ef29:function(t,e,r){}});
//# sourceMappingURL=app.afa38f49.js.map